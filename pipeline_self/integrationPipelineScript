pipeline {
    agent any

    stages {
        stage('Publish reports'){
            steps {
                publishCoverage adapters: [jacocoAdapter('pipeline_self/jacoco.xml')], sourceFileResolver: sourceFiles('NEVER_STORE')
                //step([$class: 'PitPublisher', mutationStatsFile: 'pipeline_self/mutations.xml'])
                //sh label: '', script: 'touch pipeline_self/*'
                //junit testResults: 'pipeline_self/TEST-*.xml'

                //recordIssues tools: [checkStyle(pattern: 'pipeline_self/checkstyle.xml')] , qualityGates: [[threshold: 1, type: 'TOTAL', unstable: true]]

            }
        }

        stage ('Autograding') {
            steps {
                autoGrade('{ "coverage":{"maxScore":100,"coveredImpact":1,"missedImpact":-1}}')
            }
            }

    }
}

